define("app/ui/permalink_keyboard_support",["module","require","exports","core/component","app/ui/with_block_kb_shortcut_helpers","app/ui/with_focus_highlight"],function(module, require, exports) {
function permalinkKeyboard(){this.defaultAttrs({permalinkOverlay:".PermalinkOverlay",permalinkOverlayTweetSelector:".PermalinkOverlay .permalink-tweet",permalinkPageTweetSelector:".route-permalink .permalink-tweet",ownTweetSelector:".my-tweet"}),this.getNode=function(){return this.select("permalinkOverlay").is(":visible")?this.select("permalinkOverlayTweetSelector"):this.select("permalinkPageTweetSelector")},this.triggerBlock=function(){this.triggerBlockActionOnNode(this.getNode(),"uiOpenBlockUserDialog")},this.triggerMute=function(){this.triggerBlockActionOnNode(this.getNode(),"uiDidMuteUser")},this.after("initialize",function(){this.on(document,"uiShortcutBlock",this.triggerBlock),this.on(document,"uiShortcutMuteUser",this.triggerMute)})}var defineComponent=require("core/component"),withBlockKBShortcutHelpers=require("app/ui/with_block_kb_shortcut_helpers"),withFocusHighlight=require("app/ui/with_focus_highlight");module.exports=defineComponent(permalinkKeyboard,withBlockKBShortcutHelpers,withFocusHighlight)
});
define("app/ui/hidden_ancestors",["module","require","exports","core/component","app/utils/chrome"],function(module, require, exports) {
function hiddenAncestors(){this.defaultAttrs({ancestorAdjustmentClass:"multiple-ancestors-adjustment",amtToShowFromBtmOfFrstNonImdiateAncstr:10,tweetsSelector:".ancestor",scrollContainerSelector:window,doBottomPaddingAdjustment:!0,pageContainerSelector:"#page-container",scrollContentSelector:document}),this.showHiddenAncestors=function(){var a=this.select("tweetsSelector"),b=$(this.attr.scrollContainerSelector);if(!a.length)return;$("body").removeClass(this.attr.ancestorAdjustmentClass);var c=this.getTopOffset(a.last());if(this.attr.doBottomPaddingAdjustment){var d=c-$(this.attr.scrollContentSelector).height()+b.height();$(this.attr.pageContainerSelector).css("padding-bottom",d)}b.scrollTop(c-this.attr.amtToShowFromBtmOfFrstNonImdiateAncstr)},this.getTopOffset=function(a){return this.attr.scrollContainerSelector==window?chrome.getCanvasYOffset(a)-1:a.position().top-chrome.getGlobalYOffset()-1},this.after("initialize",function(){this.on(document,"uiPageChanged uiSwiftLoaded",this.showHiddenAncestors)})}var defineComponent=require("core/component"),chrome=require("app/utils/chrome");module.exports=defineComponent(hiddenAncestors)
});
define("app/ui/hidden_descendants",["module","require","exports","core/component"],function(module, require, exports) {
function hiddenDescendants(){this.defaultAttrs({repliesSelector:".replies-to .stream-items .tweet",hasRepliesClass:"has-replies"}),this.updateRepliesState=function(){var a=this.select("repliesSelector");a.length?this.$node.addClass(this.attr.hasRepliesClass):this.$node.removeClass(this.attr.hasRepliesClass)},this.after("initialize",function(){this.on(document,"uiTweetInserted uiTweetRemoved",this.updateRepliesState)})}var defineComponent=require("core/component");module.exports=defineComponent(hiddenDescendants)
});
define("app/ui/dialogs/sms_codes",["module","require","exports","core/component","app/ui/with_dialog"],function(module, require, exports) {
function smsCodesDialog(){this.defaultAttrs({dialogSelector:"#sms-codes-dialog",triggerSelector:".sms-codes-link"}),this.after("initialize",function(){this.$dialog=this.select("dialogSelector")})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),SMSCodesDialog=defineComponent(smsCodesDialog,withDialog);module.exports=SMSCodesDialog
});
define("app/ui/permalink_tweet",["module","require","exports","core/component"],function(module, require, exports) {
function permalinkTweet(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet",permalinkTweetForm:".permalink-tweet-container + .inline-reply-tweetbox .tweet-form"}),this.homePath="/",this.expandTweetBox=function(a,b){var c=$(a.target);c.is(this.attr.permalinkTweetSelector)&&this.trigger(this.select("permalinkTweetForm"),"uiTweetBoxExpand",b)},this.redirectHome=function(a,b){var c=this.$node.find('[data-tweet-id="'+b.sourceEventData.id+'"]');c.is(this.attr.permalinkTweetSelector)&&window.location.replace(this.homePath)},this.after("initialize",function(){if(!this.attr.loggedIn)return;this.on("uiReplyToTweet",this.expandTweetBox),this.on(document,"dataDidDeleteTweet",this.redirectHome)})}var component=require("core/component"),PermalinkTweet=component(permalinkTweet);module.exports=PermalinkTweet
});
define("app/ui/timelines/conversations/descendant_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/timelines/with_old_items","app/ui/timelines/with_min_max_pagination","app/ui/with_item_actions","app/utils/string","app/ui/gallery/with_gallery"],function(module, require, exports) {
function descendantTimeline(){this.defaultAttrs({itemType:"tweet",tweetSelector:".tweet",hiddenRepliesContainerSelector:".hidden-replies-container",simpleTweetSelector:".js-simple-tweet",threadedConversationClass:"ThreadedConversation--loneTweet ThreadedConversation--ownReply",viewSubbranchesSelector:".ThreadedConversation-subbranches a"}),this.injectThreadedReply=function(a){a.wrap("<div class='"+this.attr.threadedConversationClass+"'></div>"),this.$repliesContainer.prepend(a.parent())},this.injectOwnReply=function(a,b){if(this.attr.tweetId!==b.in_reply_to_status_id)return;var c=$(b.tweet_html);this.attr.isThreaded?this.injectThreadedReply(c):((this.reachedTheEnd()?this.$repliesContainer:this.$hiddenRepliesContainer).append(c),this.$node.removeClass("hidden")),this.trigger("uiTweetInserted",b),this.trigger(c.find(this.attr.tweetSelector),"uiHasInjectedTimelineItem")},this.restoreHiddenReplies=function(a,b){this.$hiddenRepliesContainer.children().each(function(a,b){var c=$(b),d=c.find(this.attr.tweetSelector).attr("data-tweet-id");this.$repliesContainer.children().each(function(a,b){var e=$(b),f=e.find(this.attr.tweetSelector).attr("data-tweet-id"),g=stringUtils.compare(d,f);if(g===0)return c.remove(),!1;if(g<0)return c.insertBefore(e),!1}.bind(this))}.bind(this)),this.reachedTheEnd()&&(this.$repliesContainer.append(this.$hiddenRepliesContainer.html()),this.$hiddenRepliesContainer.html(""))},this.reachedTheEnd=function(){return!this.select("timelineEndSelector").hasClass("has-more-items")},this.hideReplies=function(a,b){this.select("simpleTweetSelector").length||this.$node.addClass("hidden")},this.openOverlay=function(a){a.preventDefault();var b=$(a.target);this.trigger("uiOverlayNavigate",{href:b.attr("href"),autoplay:!0,hostName:b.prop("hostname")})},this.after("initialize",function(){this.$repliesContainer=this.select("itemsSelector"),this.$hiddenRepliesContainer=this.select("hiddenRepliesContainerSelector"),this.on("uiTweetRemoved",this.hideReplies),this.on(document,"dataTweetSuccess",this.injectOwnReply),this.on("uiHasInjectedOldTimelineItems",this.restoreHiddenReplies),this.attr.isThreaded&&this.on("click",{viewSubbranchesSelector:this.openOverlay})})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withOldItems=require("app/ui/timelines/with_old_items"),withMinMaxPagination=require("app/ui/timelines/with_min_max_pagination"),withItemActions=require("app/ui/with_item_actions"),stringUtils=require("app/utils/string"),withGallery=require("app/ui/gallery/with_gallery");module.exports=BaseTimeline.mixin(descendantTimeline,withOldItems,withMinMaxPagination,withItemActions,withGallery)
});
define("app/ui/timelines/with_simple_new_items",["module","require","exports"],function(module, require, exports) {
function withSimpleNewItems(){this.defaultAttrs({endOfStreamSelector:".stream-footer",errorMessageSelector:".stream-fail-container",tryAgainSelector:".try-again-after-whale"}),this.getNewItems=function(a){a&&a.stopPropagation(),this.shouldGetNewItems()&&this.trigger("uiWantsMoreTimelineItems",this.getNewItemsData())},this.notifyNewItems=function(a,b){this.injectNewItems(a,b)},this.injectNewItems=function(a){this.resetStateVariables(a);if(!a.items_html.trim())return;var b=this.$document.height();this.injectItems("prepend",a.items_html,"uiHasInjectedNewTimelineItems"),this.$window.scrollTop(this.$document.height()-b),a.has_more_items||this.select("endOfStreamSelector").remove()},this.notifyNewItemsError=function(a){},this.after("initialize",function(){var a=this.attr.inOverlay?".PermalinkOverlay":window;this.on(a,"uiNearTheTop",this.getNewItems),this.$document=$(document),this.$window=$(window),this.on("click",{tryAgainSelector:this.tryAgainAfterWhale})})}module.exports=withSimpleNewItems
});
define("app/ui/timelines/conversations/ancestor_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/timelines/with_simple_new_items","app/ui/timelines/with_min_max_pagination","app/ui/with_item_actions","app/ui/gallery/with_gallery"],function(module, require, exports) {
function ancestorTimeline(){this.defaultAttrs({itemType:"tweet",tweetSelector:".tweet",simpleTweetSelector:".js-simple-tweet"}),this.removeAncestors=function(){this.select("simpleTweetSelector").length||this.$node.remove()},this.after("initialize",function(){this.on("uiTweetRemoved",this.removeAncestors)})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withSimpleNewItems=require("app/ui/timelines/with_simple_new_items"),withMinMaxPagination=require("app/ui/timelines/with_min_max_pagination"),withItemActions=require("app/ui/with_item_actions"),withGallery=require("app/ui/gallery/with_gallery");module.exports=BaseTimeline.mixin(ancestorTimeline,withSimpleNewItems,withMinMaxPagination,withItemActions,withGallery)
});
define("app/ui/related_tweets/related_tweets",["module","require","exports","core/component"],function(module, require, exports) {
function relatedTweets(){this.defaultAttrs({dismissDuration:200,fadeInDuration:400,hiddenTweetsSelector:".SiderailRelatedTweets-hiddenTweets",viewMoreSelector:".SiderailRelatedTweets-viewMore",authorSelector:".SiderailRelatedTweet-authorContainer",dismissSelector:".SiderailRelatedTweet-dismiss",imageSelector:".SiderailRelatedTweet-image",tweetLinkSelector:".SiderailRelatedTweet-tweetLink",tweetsSelector:".SiderailRelatedTweets",tweetSelector:".SiderailRelatedTweet",tweetIdAttr:"data-tweet-id"}),this.displayRelatedTweets=function(a,b){if(b&&b.tweets_html){this.$node.hide().html(b.tweets_html).fadeIn(this.attr.fadeInDuration),this.attachListeners();var c=this.select("tweetSelector").toArray().map(function(a){return this.getTweetData($(a))},this);this.trigger("uiRelatedTweetsImpression",{permalinkId:this.attr.tweetId,tweets:c})}},this.onClickDismiss=function(a){var b=$(a.target),c=b.closest(this.attr.tweetSelector),d=this.getTweetData(c),e=b.closest(this.attr.tweetsSelector);c.fadeOut(this.attr.dismissDuration,function(){c.remove()}),this.trigger(e,"uiRelatedTweetDismiss",{permalinkId:this.attr.tweetId,tweet:d})},this.onClickViewMore=function(a){this.select("viewMoreSelector").hide(),this.select("hiddenTweetsSelector").slideDown(),this.trigger("uiRelatedTweetsViewMore",{permalinkId:this.attr.tweetId})},this.onClickImage=function(a){var b=$(a.target).closest(this.attr.tweetSelector);this.trigger(b,"uiRelatedTweetImageClick",{permalinkId:this.attr.tweetId,tweet:this.getTweetData(b)})},this.onClickTweetLink=function(a){var b=$(a.target),c=b.closest(this.attr.tweetSelector);this.trigger(c,"uiRelatedTweetClick",{permalinkId:this.attr.tweetId,tweet:this.getTweetData(c)})},this.getTweetData=function(a){return{id:a.attr(this.attr.tweetIdAttr),position:this.select("tweetSelector").index(a)}},this.attachListeners=function(){this.on(this.attr.dismissSelector,"click",this.onClickDismiss),this.on(this.attr.imageSelector,"click",this.onClickImage),this.on(this.attr.tweetLinkSelector,"click",this.onClickTweetLink),this.on(this.attr.viewMoreSelector,"click",this.onClickViewMore)},this.after("initialize",function(){this.trigger(document,"uiGetRelatedTweets",{tweetIds:this.attr.relatedTweetIds}),this.on(document,"dataGotRelatedTweets",this.displayRelatedTweets)})}var defineComponent=require("core/component");module.exports=defineComponent(relatedTweets)
});
define("app/data/related_tweets/related_tweets",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function relatedTweets(){this.getRelatedTweets=function(a,b){if(!b||!b.tweetIds||!b.tweetIds.length)return;this.post({url:"/i/related_tweets",data:{tweet_ids:b.tweetIds},eventData:b,success:"dataGotRelatedTweets"})},this.after("initialize",function(){this.on("uiGetRelatedTweets",this.getRelatedTweets)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(relatedTweets,withData)
});
define("app/data/related_tweets/related_tweets_scribe",["module","require","exports","core/component","app/data/with_scribe","app/utils/scribe_item_types"],function(module, require, exports) {
function relatedTweetsScribe(){this.scribeImpression=function(a,b){var c={items:[this.permalinkScribeData(b.permalinkId)],targets:b.tweets.map(this.tweetScribeData.bind(this))};this.scribe("impression",b,c)},this.scribeViewMore=function(a,b){var c={items:[this.permalinkScribeData(b.permalinkId)]};this.scribe("view_all",b,c)},this.scribeTweetDismiss=function(a,b){this.scribeInteraction({element:"tweet",action:"dismiss"},b)},this.scribeTweetClick=function(a,b){this.scribeInteraction({element:"tweet",action:"click"},b)},this.scribeImageClick=function(a,b){this.scribeInteraction({element:"photo",action:"click"},b)},this.scribeInteraction=function(a,b){var c={items:[this.permalinkScribeData(b.permalinkId)],targets:[this.tweetScribeData(b.tweet)]};this.scribe(a,b,c)},this.permalinkScribeData=function(a){return{id:a,item_type:scribeItemTypes.tweet}},this.tweetScribeData=function(a){return{id:a.id,item_type:scribeItemTypes.tweet,position:a.position}},this.after("initialize",function(){this.on("uiRelatedTweetsImpression",this.scribeImpression),this.on("uiRelatedTweetsViewMore",this.scribeViewMore),this.on("uiRelatedTweetDismiss",this.scribeTweetDismiss),this.on("uiRelatedTweetClick",this.scribeTweetClick),this.on("uiRelatedTweetImageClick",this.scribeImageClick)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe"),scribeItemTypes=require("app/utils/scribe_item_types");module.exports=defineComponent(relatedTweetsScribe,withScribe)
});
define("app/ui/with_permalinktweet_tweet_actions",["module","require","exports"],function(module, require, exports) {
function withPermalinkTweetTweetActions(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet",ownTweetSelector:".my-tweet",permalinkOverlaySelector:".PermalinkOverlay .permalink-container"}),this.getPermalinkTweet=function(a,b,c){var d=this.select("permalinkTweetSelector"),e=!!d.length;return e&&(c.$tweet=d),e},this.isNotMyTweet=function(a,b,c){return!c.$tweet.is(this.attr.ownTweetSelector)},this.shouldHandleTweetAction=function(){return this.attr.inOverlay||!$(this.attr.permalinkOverlaySelector).length},this.after("initialize",function(){if(!this.attr.loggedIn)return;var a=this.mkTweetDataCollectorForAction(this.interactionDataWithCard),b=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on(document,"uiShortcutFavorite",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,a,this.toggleFavorite)),this.on(document,"uiShortcutRetweet",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,this.isNotMyTweet,a,this.toggleRetweet)),this.on(document,"uiShortcutReply",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,b,this.triggerTweetAction("uiReplyToTweet")))})}module.exports=withPermalinkTweetTweetActions
});
define("app/ui/with_inline_reply",["module","require","exports"],function(module, require, exports) {
function withInlineReply(){this.after("initialize",function(){this.on("uiReplyToTweet","expandTweetByReply")})}module.exports=withInlineReply
});
define("app/data/embed_stats_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe","app/data/with_interaction_data_scribe","app/utils/scribe_item_types"],function(module, require, exports) {
function embedStatsScribe(){this.scribeOutboundClick=function(a,b){this.scribe({component:"embed_stats",element:"link",action:"click"},{items:[{id:b.tweetId,item_type:itemTypes.tweet}],url:b.url})},this.scribeMoreStatsClick=function(a,b){this.scribe({component:"embed_stats",element:"more",action:"click"},{items:[{id:b.tweetId,item_type:itemTypes.tweet}]})},this.after("initialize",function(){this.on(document,"uiClickedEmbeddedTweetLink",this.scribeOutboundClick),this.on(document,"uiExpandedMoreEmbeddedTweetLinks",this.scribeMoreStatsClick)})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe"),withInteractionDataScribe=require("app/data/with_interaction_data_scribe"),itemTypes=require("app/utils/scribe_item_types");module.exports=defineComponent(embedStatsScribe,withScribe,withInteractionDataScribe)
});
define("app/data/permalink_scribe",["module","require","exports","core/component","app/data/with_interaction_data_scribe","app/data/with_card_metadata"],function(module, require, exports) {
function permalinkScribe(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet"}),this.scribePermalinkImpression=function(){var a=this.select("permalinkTweetSelector"),b=this.getCardDataFromTweet(a);b.tweetHasCard&&this.scribeCardInteraction("show",b)},this.after("initialize",function(){this.scribePermalinkImpression()})}var defineComponent=require("core/component"),withInteractionDataScribe=require("app/data/with_interaction_data_scribe"),withCardMetadata=require("app/data/with_card_metadata");module.exports=defineComponent(permalinkScribe,withInteractionDataScribe,withCardMetadata)
});
define("app/data/with_boot_with_teardown_context",["module","require","exports","core/registry"],function(module, require, exports) {
function withBootWithTeardownContext(){this.bootWithTeardownContext=function(a,b,c){var d=registry.addInstance;c&&(registry.addInstance=function(a){a.teardownContext=c,d.call(registry,a)}),a(b),registry.addInstance=d}}var registry=require("core/registry");module.exports=withBootWithTeardownContext
});
define("app/ui/overlay_navigation",["module","require","exports","core/component","app/data/with_boot_with_teardown_context","app/utils/full_path","app/utils/push_state_enabled"],function(module, require, exports) {
function overlayNavigation(){this.defaultAttrs({pushState:!0}),this.overlayNavigate=function(a,b){b&&b.impressionCookie&&this.trigger("uiSendImpressionCookie",b),this.trigger("uiOverlayOpen"),this.trigger("uiOverlayNeedsPage",b),this.teardownOverlay()},this.updateOverlay=function(a,b){this.trigger("uiOverlayUpdate",{html:b.page}),this.loadModule(b)},this.updateOverlayAndTitle=function(a,b){this.updateOverlay(a,b),this.trigger("uiUpdatePageTitle",{title:b.title}),b.canonical_url&&$('link[rel="canonical"]').attr("href",b.canonical_url)},this.loadModule=function(a){using(a.module,function(b){var c="overlay";a.init_data.inOverlay=!0,this.bootWithTeardownContext(b,a.init_data,c),this.trigger("uiOverlayPageChanged",a)}.bind(this))},this.rollback=function(a,b){b.rollbackCount>0?(this.isRollback=!0,history.go(-b.rollbackCount)):delete this.isRollback},this.handlePopstate=function(a,b){var c=b.state&&b.state.inOverlay;this.isRollback?(a.preventDefault(),this.trigger("uiDidRollback",b),delete this.isRollback):c&&(a.preventDefault(),this.trigger("uiOverlayNavigate",{isPopState:!0,href:fullPath()}))},this.updatePageTitle=function(){this.trigger("uiUpdatePageTitle",{title:history.state&&history.state.title}),this.trigger("uiPageNeedsCount")},this.handleUpdatePageCount=function(a,b){history.state&&history.state.inOverlay&&a.preventDefault()},this.teardownOverlay=function(){this.trigger("uiTeardown",{teardownContext:"overlay"})},this.after("initialize",function(){this.on("uiOverlayNavigate",this.overlayNavigate),this.on("uiOverlayClosedByRequest",this.teardownOverlay),pushStateEnabled(this.attr.pushState)?(this.on("dataOverlayPageSuccess",this.updateOverlayAndTitle),this.on("dataNeedsRollback",this.rollback),this.on(document,"uiPopStateNavigate",this.handlePopstate),this.on("uiDidRollback",this.updatePageTitle),this.on(document,"uiUpdatePageCount",this.handleUpdatePageCount)):this.on("dataOverlayPageSuccess",this.updateOverlay)})}var defineComponent=require("core/component"),withBootWithTeardownContext=require("app/data/with_boot_with_teardown_context"),fullPath=require("app/utils/full_path"),pushStateEnabled=require("app/utils/push_state_enabled");module.exports=defineComponent(overlayNavigation,withBootWithTeardownContext)
});
define("app/data/overlay_navigation",["module","require","exports","core/component","app/data/with_data","app/utils/full_path","app/data/with_rollback_count","core/utils","app/utils/push_state_enabled"],function(module, require, exports) {
function overlayNavigation(){this.defaultAttrs({pushState:!0,currentPageName:"",underlyingSectionName:""}),this.pushState=function(a,b){var c={inOverlay:!0,rollbackCount:this.rollbackCount()+1};b.href!=fullPath()&&history.pushState(c,b.title,b.href)},this.handlePageSuccess=function(a){a.init_data&&a.page&&a.module?(a.href=a.init_data.href,a.init_data.overlayCapable?(this.trigger("dataOverlayDoPushState",a),this.trigger("dataOverlayPageSuccess",a)):this.trigger("uiNavigate",{href:a.href})):this.handlePageError(a)},this.handlePageError=function(a){this.trigger("dataOverlayPageFailure",a)},this.getHeaders=function(){return{"X-Overlay-Request":!0,"X-Previous-Page-Name":this.currentPageName}},this.currentPageChanged=function(a,b){this.currentPageName=b.init_data.pageName,this.underlyingSectionName=b.init_data.sectionName},this.getPage=function(a,b){this.get({headers:this.getHeaders(),url:b.href,success:function(a){this.handlePageSuccess(utils.merge(a,{autoplay:b&&b.autoplay}))}.bind(this),error:this.handlePageError.bind(this)})},this.rollback=function(){this.trigger("dataNeedsRollback",{rollbackCount:this.rollbackCount()})},this.updateScribeSection=function(){this.trigger("dataUpdateScribeSection",{sectionName:this.underlyingSectionName})},this.after("initialize",function(){this.currentPageName=this.attr.currentPageName,this.underlyingSectionName=this.attr.underlyingSectionName,this.on("uiPageChanged",this.currentPageChanged),this.on("uiOverlayNeedsPage",this.getPage),pushStateEnabled(this.attr.pushState)&&(this.on("uiOverlayClosedByRequest",this.rollback),this.on("dataOverlayDoPushState",this.pushState)),this.on("uiOverlayClosed",this.updateScribeSection)})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),fullPath=require("app/utils/full_path"),withRollbackCount=require("app/data/with_rollback_count"),utils=require("core/utils"),pushStateEnabled=require("app/utils/push_state_enabled");module.exports=defineComponent(overlayNavigation,withData,withRollbackCount)
});
define("app/ui/dialogs/permalink_overlay",["module","require","exports","core/component","app/ui/with_dialog","core/utils"],function(module, require, exports) {
function PermalinkOverlay(){this.defaultAttrs({spinnerSelector:".PermalinkOverlay-spinnerContainer",overlayEnabledClass:"overlay-enabled",overlayCloseButtonSelector:".PermalinkOverlay-close",overlayModalContainerSelector:".PermalinkOverlay",overlayModalClass:".PermalinkOverlay-modal",overlayModalContentSelector:".PermalinkOverlay-content",overlayModalBodySelector:".PermalinkOverlay-body"}),this.openOverlay=function(a,b){this.isOpen()||(this.showSpinner(),this.select("overlayModalBodySelector").empty(),this.open())},this.updateOverlay=function(a,b){this.hideSpinner(),this.select("overlayModalBodySelector").html(b.html),this.open()},this.possiblyCloseOverlay=function(a){this.$node.is(a.target)&&this.close()},this.empty=function(){this.select("overlayModalBodySelector").empty()},this.hideSpinner=function(){this.select("spinnerSelector").addClass("u-hidden")},this.showSpinner=function(){this.select("spinnerSelector").removeClass("u-hidden")},this.after("initialize",function(){this.on("click",this.possiblyCloseOverlay),this.on("uiDialogClosed",this.empty),this.on("uiDialogClosed","uiOverlayClosed"),this.on("uiDialogClosedByRequest","uiOverlayClosedByRequest"),this.on(document,"uiOverlayOpen",this.openOverlay),this.on(document,"uiOverlayClose",this.close),this.on(document,"uiOverlayUpdate",this.updateOverlay)})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),utils=require("core/utils");module.exports=defineComponent(PermalinkOverlay,withDialog)
});
define("app/boot/permalink_overlay",["module","require","exports","app/ui/overlay_navigation","app/data/overlay_navigation","app/ui/dialogs/permalink_overlay"],function(module, require, exports) {
function initialize(a){a.permalinkOverlayEnabled&&(PermalinkOverlay.attachTo(".PermalinkOverlay",{noTeardown:!0,modalEnabledClass:"overlay-enabled",closeButtonSelector:".PermalinkOverlay-close",modalSelector:".PermalinkOverlay-modal",modalContainerSelector:".PermalinkOverlay",modalContentSelector:".PermalinkOverlay-content",modalBodySelector:".PermalinkOverlay-body"}),OverlayNavigationUI.attachTo(document,{pushState:a.pushState,noTeardown:!0}),OverlayNavigationData.attachTo(document,{currentPageName:a.pageName,underlyingSectionName:a.sectionName,pushState:a.pushState,noTeardown:!0}))}var OverlayNavigationUI=require("app/ui/overlay_navigation"),OverlayNavigationData=require("app/data/overlay_navigation"),PermalinkOverlay=require("app/ui/dialogs/permalink_overlay");module.exports=initialize
});
define("app/pages/permalink",["module","require","exports","app/ui/permalink_keyboard_support","app/ui/hidden_ancestors","app/ui/hidden_descendants","app/ui/dialogs/sms_codes","app/ui/permalink_tweet","app/ui/timelines/conversations/descendant_timeline","app/ui/timelines/conversations/ancestor_timeline","app/boot/logged_out","app/ui/embed_stats","app/boot/timeline","app/boot/tweets","app/ui/related_tweets/related_tweets","app/data/related_tweets/related_tweets","app/data/related_tweets/related_tweets_scribe","app/ui/tweet_actions","app/ui/top_videos/top_videos","app/data/top_videos/top_videos","app/ui/profile/highline_tweet_stats","app/ui/with_permalinktweet_tweet_actions","app/ui/with_tweet_translation","app/ui/with_inline_reply","app/ui/tweets","core/utils","app/boot/app","app/data/embed_stats_scribe","app/data/permalink_scribe","app/utils/tweet_helper","app/boot/trends","app/ui/more_tweet_actions_dropdown","app/ui/multiline_ellipses","app/boot/permalink_overlay"],function(module, require, exports) {
var PermalinkKeyboardSupport=require("app/ui/permalink_keyboard_support"),HiddenAncestors=require("app/ui/hidden_ancestors"),HiddenDescendants=require("app/ui/hidden_descendants"),SMSCodesDialog=require("app/ui/dialogs/sms_codes"),PermalinkTweet=require("app/ui/permalink_tweet"),DescendantTimeline=require("app/ui/timelines/conversations/descendant_timeline"),AncestorTimeline=require("app/ui/timelines/conversations/ancestor_timeline"),loggedOutBoot=require("app/boot/logged_out"),EmbedStats=require("app/ui/embed_stats"),timelineBoot=require("app/boot/timeline"),tweetsBoot=require("app/boot/tweets"),RelatedTweets=require("app/ui/related_tweets/related_tweets"),RelatedTweetsData=require("app/data/related_tweets/related_tweets"),RelatedTweetsScribe=require("app/data/related_tweets/related_tweets_scribe"),TweetActionsUI=require("app/ui/tweet_actions"),TopVideosWidget=require("app/ui/top_videos/top_videos"),TopVideosData=require("app/data/top_videos/top_videos"),HighlineTweetStats=require("app/ui/profile/highline_tweet_stats"),withPermalinkTweetTweetActions=require("app/ui/with_permalinktweet_tweet_actions"),withTweetTranslation=require("app/ui/with_tweet_translation"),withInlineReply=require("app/ui/with_inline_reply"),Tweets=require("app/ui/tweets"),utils=require("core/utils"),bootApp=require("app/boot/app"),EmbedStatsScribe=require("app/data/embed_stats_scribe"),PermalinkScribe=require("app/data/permalink_scribe"),tweetHelper=require("app/utils/tweet_helper"),trends=require("app/boot/trends"),MoreTweetActionsDropdown=require("app/ui/more_tweet_actions_dropdown"),MultilineEllipses=require("app/ui/multiline_ellipses"),permalinkOverlayBoot=require("app/boot/permalink_overlay");module.exports=function(a){function i(b){return utils.merge(a,{eventData:{scribeContext:{component:b}},itemType:"tweet",lastItemSelector:".tweet:last",disableProfilePopup:a.inOverlay,inOverlay:a.inOverlay,genericItemSelector:".js-stream-tweet",useDeduping:!0})}var b=a.inOverlay?".PermalinkOverlay":"#page-container.wrapper-permalink",c=b+" div.permalink-tweet-container",d="div.permalink-tweet",e=b+" .embed-stats-container",f=".siderail-related-tweets-container",g=".permalink-replies .stream-container";bootApp(a),loggedOutBoot(a),permalinkOverlayBoot(a),MultilineEllipses.attachTo(document),tweetsBoot(b,utils.merge(a,{preexpandedTweetSelector:d,preexpandedOpenTweetSelector:d,generalTweetSelector:d})),EmbedStats.attachTo(e,a),EmbedStatsScribe.attachTo(document);var h={};a.isThreaded&&(h={permalinkOverlayTweetSelector:".ThreadedPermalinkOverlay-focalTweet .tweet"}),PermalinkKeyboardSupport.attachTo(document,h),PermalinkScribe.attachTo(document);var j,k;if(a.loggedIn){var l=a;a.inOverlay&&(l=utils.merge(a,{infiniteScrollNode:".PermalinkOverlay",contentSelector:".PermalinkOverlay-body .permalink-container"})),timelineBoot(l),j=DescendantTimeline,k=AncestorTimeline}else j=k=Tweets;a.inOverlay?HiddenAncestors.attachTo(".PermalinkOverlay div.in-reply-to",{scrollContainerSelector:".PermalinkOverlay",doBottomPaddingAdjustment:!1}):HiddenAncestors.attachTo("div.in-reply-to"),HiddenDescendants.attachTo(".permalink"),Tweets.attachTo(c,i("tweet")),Tweets.attachTo(g,i("tweet")),PermalinkTweet.attachTo(".permalink",i("tweet")),HighlineTweetStats.attachTo(document),TweetActionsUI.mixin.apply(this,[withTweetTranslation,withPermalinkTweetTweetActions]).attachTo(c,i("tweet")),MoreTweetActionsDropdown.attachTo(c,i("tweet")),k.attachTo(".in-reply-to",i("conversation")),TweetActionsUI.mixin(withTweetTranslation).attachTo(".in-reply-to",i("conversation")),MoreTweetActionsDropdown.attachTo(".in-reply-to",i("conversation")),j.attachTo(".replies-to",i("replies")),TweetActionsUI.mixin(withTweetTranslation).attachTo(".replies-to",i("replies")),MoreTweetActionsDropdown.attachTo(".replies-to",i("replies")),a.loggedIn?$(b).find(".inline-reply-tweetbox .tweet-form").trigger("uiInitTweetbox",{condensable:!0,preventTweetingDefaultText:!1,impressionId:a.impressionId,inReplyToStatusId:a.tweetId,eventData:{scribeContext:{component:"inline_reply"}},inReplyToTweetData:{screenNames:tweetHelper.extractMentionsForReply($(d),a.screenName)}}):SMSCodesDialog.attachTo("body"),trends(utils.merge(a,{show_context:!1})),a.showTopVideos&&(TopVideosData.attachTo(document,{type:"siderail",tweetId:a.tweetId}),TopVideosWidget.attachTo(".js-top-video-module")),a.showRelatedTweets&&(RelatedTweetsScribe.attachTo(document),RelatedTweetsData.attachTo(document),Tweets.attachTo(f,i("related_tweets")),RelatedTweets.attachTo(f,i("related_tweets")))}
});
define("app/ui/threaded_permalink_tweet",["module","require","exports","core/component"],function(module, require, exports) {
function threadedPermalinkTweet(){this.defaultAttrs({permalinkTweetSelector:".ThreadedPermalinkOverlay-focalTweet .tweet"}),this.openReplyBox=function(a,b){var c=$(a.target);this.trigger(c,"uiOpenReplyDialog",b)},this.closeDialog=function(a,b){var c=this.$node.find('[data-tweet-id="'+b.sourceEventData.id+'"]');c.is(this.attr.permalinkTweetSelector)&&this.trigger("uiCloseDialog")},this.after("initialize",function(){this.on("uiReplyToTweet",this.openReplyBox),this.on(document,"dataDidDeleteTweet",this.closeDialog)})}var component=require("core/component"),ThreadedPermalinkTweet=component(threadedPermalinkTweet);module.exports=ThreadedPermalinkTweet
});
define("app/pages/threaded_permalink_overlay",["module","require","exports","app/boot/app","app/ui/timelines/conversations/descendant_timeline","app/ui/multiline_ellipses","app/data/permalink_scribe","app/ui/more_tweet_actions_dropdown","core/utils","app/ui/threaded_permalink_tweet","app/boot/timeline","app/ui/tweet_actions","app/ui/tweets","app/boot/tweets","app/ui/with_permalinktweet_tweet_actions","app/ui/with_tweet_translation"],function(module, require, exports) {
var bootApp=require("app/boot/app"),DescendantTimeline=require("app/ui/timelines/conversations/descendant_timeline"),MultilineEllipses=require("app/ui/multiline_ellipses"),PermalinkScribe=require("app/data/permalink_scribe"),MoreTweetActionsDropdown=require("app/ui/more_tweet_actions_dropdown"),utils=require("core/utils"),ThreadedPermalinkTweet=require("app/ui/threaded_permalink_tweet"),timelineBoot=require("app/boot/timeline"),TweetActionsUI=require("app/ui/tweet_actions"),Tweets=require("app/ui/tweets"),tweetsBoot=require("app/boot/tweets"),withPermalinkTweetTweetActions=require("app/ui/with_permalinktweet_tweet_actions"),withTweetTranslation=require("app/ui/with_tweet_translation");module.exports=function(a){var b=".PermalinkOverlay",c=".ThreadedPermalinkOverlay-focalTweet .tweet",d=".ThreadedPermalinkOverlay-replies .replies-to";bootApp(a),MultilineEllipses.attachTo(b),tweetsBoot(b,utils.merge(a,{preexpandedTweetSelector:c,preexpandedOpenTweetSelector:c,generalTweetSelector:c,excludeConversations:!0,excludeExpandingTweets:!0})),a=utils.merge(a,{itemType:"tweet",lastItemSelector:".tweet:last",disableProfilePopup:!0,inOverlay:!0,genericItemSelector:".js-stream-tweet",useDeduping:!0,permalinkTweetSelector:c}),PermalinkScribe.attachTo(b,a),ThreadedPermalinkTweet.attachTo(b),timelineBoot(utils.merge(a,{infiniteScrollNode:".ThreadedPermalinkOverlay .ThreadedPermalinkOverlay-replies",contentSelector:".replies-to"})),Tweets.attachTo(b,a),TweetActionsUI.mixin.apply(this,[withTweetTranslation,withPermalinkTweetTweetActions]).attachTo(b,a),MoreTweetActionsDropdown.attachTo(b,a),DescendantTimeline.attachTo(d,a)}
});